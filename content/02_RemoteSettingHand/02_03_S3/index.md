---
title: "3. 静的ファイル保存ストレージ (S3)の作成"
weight: 230
---

リモート接続に踏み台サーバを利用していく中で、データのやり取りを行いたい場合は多くあると思います。例えば、踏み台サーバを通じてのデータ持ち込み(更新パッチ、プログラムなどの持ち込み)、医療機関側のサーバのデータやファイルの取り込みなどが考えられます。
そのため、今回構成する「集約型リモート保守」のアーキテクチャではこうしたやり取りに、S3 を用います。
各ベンダー専用のバケットを作成し、マネジメントコンソール経由でデータをアップロード、ダウンロードします。EC2では、AWS CLI コマンドを利用しつつ、S3 と踏み台サーバのデータをやり取りしましょう。

では、S3 のバケットを作成していきます。
## 1. S3 管理ページを開く
![s3-search](/static/02_RemoteSettingHand/02_03_S3/s3_search.png)

[コンソールのホーム画面](https://console.aws.amazon.com/console) から画面上部のサービス検索バーに移動し、「S3」と入力して検索し、S3 サービスを選択します。

---

## 2. S3 バケットの作成

![s3-create](/static/02_RemoteSettingHand/02_03_S3/s3_create.png)

バケットを作成を選択してください。

## 3. 作成する S3 バケットの設定入力
### 3-1. バケット名を入力
![s3-name](/static/02_RemoteSettingHand/02_03_S3/s3_name.png)

任意のバケット名を指定してください。

**設定項目**
- **バケット名** : (例) s3-vendor-b-yymmdd

### 3-2. タグの設定

![s3-tag](/static/02_RemoteSettingHand/02_03_S3/s3_tag.png)

基本はデフォルトの設定で作成し、タグも忘れずに設定してください。

**設定項目**
- **タグ** :
  - **タグキー** : Env
  - **タグ値** : VendorB

### 3-3. 暗号化の設定

![s3-encrypt](/static/02_RemoteSettingHand/02_03_S3/s3_encrypt.png)

デフォルトの暗号化にて、暗号化タイプを先ほど作成した KMS により行います。
SSE-KMS を選択し、S3 用に作成した KMS キーを選択してください。

**設定項目**
- **暗号化タイプ** : SSE-KMS
  - **AWS KMS キー** : AWS KMS キーから選択する
  - **AWS KMS キー** : S3-KMS-VendB

### 3-4. その他の設定（デフォルトのまま）

以下初期設定のまま変更しなかった項目についても記載しておきます。
- **AWS リージョン** : ap-northeast-1 (東京)
- **バケットタイプ** : 汎用
- **オブジェクト所有者** : ACL 無効 (推奨)
- **このバケットのブロックパブリックアクセス設定** : パブリックアクセスをすべて ブロック
- **バケットのバージョニング** : 無効にする
- **詳細設定**
  - **オブジェクトロック** : 無効

---

以上で S3 の設定も完了になりますので、バケットを作成から S3 バケットを作成してください。 